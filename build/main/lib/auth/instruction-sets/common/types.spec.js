"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// tslint:disable:no-expression-statement no-magic-numbers
const ava_1 = __importDefault(require("ava"));
const utils_1 = require("../../../utils/utils");
const common_1 = require("./common");
/**
 * Derived from https://github.com/bitcoinjs/bitcoinjs-lib
 */
const validScriptNumbers = [
    ['', BigInt(0)],
    ['01', BigInt(1)],
    ['02', BigInt(2)],
    ['03', BigInt(3)],
    ['7e', BigInt(126)],
    ['7f', BigInt(127)],
    ['8000', BigInt(128)],
    ['8100', BigInt(129)],
    ['8200', BigInt(130)],
    ['ff00', BigInt(255)],
    ['fe7f', BigInt(32766)],
    ['ff7f', BigInt(32767)],
    ['008000', BigInt(32768)],
    ['018000', BigInt(32769)],
    ['028000', BigInt(32770)],
    ['ffff00', BigInt(65535)],
    ['ffffff00', BigInt(16777215)],
    ['feff7f', BigInt(8388606)],
    ['ffff7f', BigInt(8388607)],
    ['00008000', BigInt(8388608)],
    ['01008000', BigInt(8388609)],
    ['02008000', BigInt(8388610)],
    ['feffff7f', BigInt(2147483646)],
    ['ffffff7f', BigInt(2147483647)],
    ['ffffffff', BigInt(-2147483647)],
    ['feffffff', BigInt(-2147483646)],
    ['fdffffff', BigInt(-2147483645)],
    ['ffffff80', BigInt(-16777215)],
    ['01008080', BigInt(-8388609)],
    ['00008080', BigInt(-8388608)],
    ['ffffff', BigInt(-8388607)],
    ['feffff', BigInt(-8388606)],
    ['fdffff', BigInt(-8388605)],
    ['ffff80', BigInt(-65535)],
    ['018080', BigInt(-32769)],
    ['008080', BigInt(-32768)],
    ['ffff', BigInt(-32767)],
    ['feff', BigInt(-32766)],
    ['fdff', BigInt(-32765)],
    ['ff80', BigInt(-255)],
    ['8180', BigInt(-129)],
    ['8080', BigInt(-128)],
    ['ff', BigInt(-127)],
    ['fe', BigInt(-126)],
    ['fd', BigInt(-125)],
    ['82', BigInt(-2)],
    ['81', BigInt(-1)]
];
const invalidScriptNumbers = [
    ['00', common_1.ScriptNumberError.requiresMinimal],
    ['0000', common_1.ScriptNumberError.requiresMinimal],
    ['80', common_1.ScriptNumberError.requiresMinimal]
];
ava_1.default('parseBytesAsScriptNumber', t => {
    [...validScriptNumbers, ...invalidScriptNumbers].map(pair => {
        t.deepEqual(common_1.parseBytesAsScriptNumber(utils_1.hexToBin(pair[0])), pair[1]);
    });
});
ava_1.default('bigIntToScriptNumber', t => {
    validScriptNumbers.map(pair => {
        t.deepEqual(utils_1.binToHex(common_1.bigIntToScriptNumber(pair[1])), pair[0]);
    });
});
// TODO: more test vectors
ava_1.default('stackElementIsTruthy', t => {
    t.is(common_1.stackElementIsTruthy(common_1.bigIntToScriptNumber(BigInt(0))), false);
    t.is(common_1.stackElementIsTruthy(common_1.bigIntToScriptNumber(BigInt(1))), true);
});
ava_1.default('booleanToScriptNumber', t => {
    t.deepEqual(common_1.booleanToScriptNumber(false), common_1.bigIntToScriptNumber(BigInt(0)));
    t.deepEqual(common_1.booleanToScriptNumber(true), common_1.bigIntToScriptNumber(BigInt(1)));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMuc3BlYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvYXV0aC9pbnN0cnVjdGlvbi1zZXRzL2NvbW1vbi90eXBlcy5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsMERBQTBEO0FBQzFELDhDQUF1QjtBQUN2QixnREFBMEQ7QUFDMUQscUNBTWtCO0FBRWxCOztHQUVHO0FBQ0gsTUFBTSxrQkFBa0IsR0FBb0M7SUFDMUQsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2YsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNqQixDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakIsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuQixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNyQixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN2QixDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekIsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENB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